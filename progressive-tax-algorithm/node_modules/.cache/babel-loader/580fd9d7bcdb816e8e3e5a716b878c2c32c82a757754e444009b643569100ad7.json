{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Table.scss';import TableItem from'./TableItem';import axios from'axios';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Table(_ref){let{week}=_ref;const[userList]=useState([{id:'hyeonho28',tier:'p'},{id:'no13song',tier:'g'},{id:'kkomul1',tier:'g'},{id:'gwonllna',tier:'g'},{id:'tjfzjarlatlgus',tier:'g'},{id:'always216',tier:'g'},{id:'mjhee2647',tier:'s'},{id:'lumicode',tier:'g'},{id:'theolee72',tier:'s'},{id:'jungyun01',tier:'s'}]);// const userList = [{ id: 'hyeonho28', tier: 'p' }];\n// const problemList = [\n//   1309, 9278, 16132, 1735, 23048, 15897, 30194, 23041, 2673, 3012,\n// ];\nconst[data,setData]=useState([]);const[load,setLoad]=useState(true);const[totalProblemList,setTotalProblemList]=useState([]);useEffect(()=>{if(week>0&&totalProblemList.length<week){const qweek=totalProblemList.length+1;axios.get('https://progressive-tax-algorithm.fly.dev/problem/'+qweek,{withCredentials:true}).then(res=>{setTotalProblemList(tpl=>{return[...tpl,{week:qweek,problems:res.data}];});}).catch(err=>{setTotalProblemList(tpl=>{return[...tpl,{week:qweek,problems:[]}];});});}else{setData([{week:1,data:{index:0,data:[]}}]);}},[totalProblemList]);useEffect(()=>{setLoad(true);setData([]);setTotalProblemList([]);},[week]);useEffect(()=>{if(userList.length===10&&week>0&&totalProblemList.length>=week&&data.length>0&&data.length<=week){const ind=data.length-1;if(data[ind].data.index>=0&&data[ind].data.index<userList.length){const ele=userList[data[ind].data.index];try{axios.get('https://progressive-tax-algorithm.fly.dev/submit/'+data[ind].week+'/'+ele.id,{withCredentials:true}).then(res=>{const row=totalProblemList[data[ind].week-1].problems.map(elem=>{const filtered=res.data.filter(element=>{return Number(element.problemID)===elem.id;});if(filtered.filter(element=>{return element['submitResult']==='ac';}).length>0){return'ac';}else{if(filtered.length===0)return'';return filtered[0]['submitResult'];}});setData(data.map((d,i)=>{if(i===ind){return{week:d.week,data:{index:d.data.index+1,data:[...d.data.data,{user:ele,submitResult:row}]}};}else{return d;}}));}).catch(err=>{console.log(err);setData(data.map((d,i)=>{if(i===ind){return{week:d.week,data:{index:d.data.index+1,data:[...d.data.data,{user:ele,submitResult:[]}]}};}else{return d;}}));});}catch(e){console.log(e);setData(data.map((d,i)=>{if(i===ind){return{week:d.week,data:{index:d.data.index+1,data:[...d.data.data,{user:ele,submitResult:[]}]}};}else{return d;}}));}}else{if(ind+1<week){setData(dd=>{return[...dd,{week:data[ind].week+1,data:{index:0,data:[]}}];});}else{setLoad(false);}}}},[data,totalProblemList,userList]);return/*#__PURE__*/_jsx(\"section\",{className:\"ftco-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:load?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-wrap\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-responsive-xl\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Handle\"}),totalProblemList.length>=week?totalProblemList[week-1].problems.map(ele=>{return/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.acmicpc.net/problem/\".concat(ele.id),target:\"_blank\",children:ele.id})});}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"th\",{className:\"table-space left\",children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-space\",children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-tax\",children:\"\\uB204\\uC9C4\\uC138\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.length>=week?data[week-1].data.data.map(ele=>{return/*#__PURE__*/_jsx(TableItem,{user:ele['user'],submitResult:ele['submitResult'],tpl:totalProblemList,data:data,week:week});}):/*#__PURE__*/_jsx(_Fragment,{})})]})})})})})});}export default Table;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}