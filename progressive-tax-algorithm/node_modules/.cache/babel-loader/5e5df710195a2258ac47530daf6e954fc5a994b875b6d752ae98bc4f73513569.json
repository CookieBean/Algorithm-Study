{"ast":null,"code":"import React,{useEffect,useState}from'react';import styles from'./TableItem.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TableItem(_ref){let{user,submitResult,problemList,tpl,data,week}=_ref;// const resType = ['ac', 'tle', 'wa', 'pac', 'pac', 'rte'];\nconst resType='ac';const[stack,setStack]=useState({val:0,ind:-1});const[filtered,setFiltered]=useState([]);const getTax=val=>{if(val<=2)return val*1000;else if(val<=4)return val*3000;else if(val<=6)return val*6000;else return val*10000;};useEffect(()=>{if(week>0&&tpl.length>=week&&data.length>=week&&user.id){setFiltered(tpl.map((ele,ind)=>{const neccessary=ele.problems.filter((ele,index)=>!ele.isChallenge&&data[ind].data.data.filter(e=>e.user.id===user.id)[0].submitResult[index]!=='ac').length;const challenge=ele.problems.filter((ele,index)=>ele.isChallenge&&data[ind].data.data.filter(e=>e.user.id===user.id)[0].submitResult[index]==='ac').length;if(ind===0)return{neccessary:neccessary,challenge:0};return{neccessary:neccessary,challenge:challenge};}));}},[tpl,data,user.id,week]);useEffect(()=>{if(filtered.length>0)setStack({val:0,ind:0});if(user.id==='jungyun01'){console.log(filtered);}},[filtered]);useEffect(()=>{if(week>0){if(1<=stack.ind+1&&stack.ind+1<=week){setStack({ind:stack.ind+1,val:stack.val+filtered[stack.ind].neccessary-filtered[stack.ind].challenge>0?stack.val+filtered[stack.ind].neccessary-filtered[stack.ind].challenge:0});}}},[stack,week]);useEffect(()=>{if(user.id==='jungyun01')console.log(stack);},[stack]);return/*#__PURE__*/_jsxs(\"tr\",{className:styles['alert'],role:\"alert\",children:[/*#__PURE__*/_jsx(\"td\",{className:styles['handle-'+user.tier],children:user.id}),submitResult.map(ele=>{return/*#__PURE__*/_jsx(\"td\",{className:styles['status'],children:/*#__PURE__*/_jsx(\"span\",{className:styles[ele],children:ele.toUpperCase()})});}),/*#__PURE__*/_jsx(\"td\",{className:styles['table-space-left'],children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"td\",{className:styles['table-space'],children:\"\\xA0\"}),/*#__PURE__*/_jsx(\"td\",{className:styles[getTax(stack.val)>0?'table-tax-d':'table-tax'],children:(getTax(stack.val)>0?getTax(stack.val):0)+'원'})]});}export default TableItem;","map":{"version":3,"names":["React","useEffect","useState","styles","jsx","_jsx","jsxs","_jsxs","TableItem","_ref","user","submitResult","problemList","tpl","data","week","resType","stack","setStack","val","ind","filtered","setFiltered","getTax","length","id","map","ele","neccessary","problems","filter","index","isChallenge","e","challenge","console","log","className","role","children","tier","toUpperCase"],"sources":["/Users/cookiebean/Desktop/boj/study/progressive-tax-algorithm/src/TableItem.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport logo from './logo.svg';\nimport styles from './TableItem.module.scss';\nimport { getValue } from '@testing-library/user-event/dist/utils';\n\nfunction TableItem({\n  user,\n  submitResult,\n  problemList,\n  tpl,\n  data,\n  week,\n}: {\n  user: User;\n  submitResult: string[];\n  problemList: Problem[];\n  tpl: TotalProblem[];\n  data: Data[];\n  week: number;\n}) {\n  // const resType = ['ac', 'tle', 'wa', 'pac', 'pac', 'rte'];\n  const resType = 'ac';\n  const [stack, setStack] = useState({ val: 0, ind: -1 });\n  const [filtered, setFiltered] = useState<Calc[]>([]);\n\n  const getTax = (val: number) => {\n    if (val <= 2) return val * 1000;\n    else if (val <= 4) return val * 3000;\n    else if (val <= 6) return val * 6000;\n    else return val * 10000;\n  };\n\n  useEffect(() => {\n    if (week > 0 && tpl.length >= week && data.length >= week && user.id) {\n      setFiltered(\n        tpl.map((ele: TotalProblem, ind: number) => {\n          const neccessary = ele.problems.filter(\n            (ele, index) =>\n              !ele.isChallenge &&\n              data[ind].data.data.filter((e) => e.user.id === user.id)[0]\n                .submitResult[index] !== 'ac',\n          ).length;\n          const challenge = ele.problems.filter(\n            (ele, index) =>\n              ele.isChallenge &&\n              data[ind].data.data.filter((e) => e.user.id === user.id)[0]\n                .submitResult[index] === 'ac',\n          ).length;\n          if (ind === 0) return { neccessary: neccessary, challenge: 0 };\n          return { neccessary: neccessary, challenge: challenge };\n        }),\n      );\n    }\n  }, [tpl, data, user.id, week]);\n\n  useEffect(() => {\n    if (filtered.length > 0) setStack({ val: 0, ind: 0 });\n    if (user.id === 'jungyun01') {\n      console.log(filtered);\n    }\n  }, [filtered]);\n\n  useEffect(() => {\n    if (week > 0) {\n      if (1 <= stack.ind + 1 && stack.ind + 1 <= week) {\n        setStack({\n          ind: stack.ind + 1,\n          val:\n            stack.val +\n              filtered[stack.ind].neccessary -\n              filtered[stack.ind].challenge >\n            0\n              ? stack.val +\n                filtered[stack.ind].neccessary -\n                filtered[stack.ind].challenge\n              : 0,\n        });\n      }\n    }\n  }, [stack, week]);\n\n  useEffect(() => {\n    if (user.id === 'jungyun01') console.log(stack);\n  }, [stack]);\n\n  return (\n    <tr className={styles['alert']} role=\"alert\">\n      <td className={styles['handle-' + user.tier]}>{user.id}</td>\n      {submitResult.map((ele) => {\n        return (\n          <td className={styles['status']}>\n            <span className={styles[ele]}>{ele.toUpperCase()}</span>\n          </td>\n        );\n      })}\n      <td className={styles['table-space-left']}>&nbsp;</td>\n      <td className={styles['table-space']}>&nbsp;</td>\n      <td\n        className={styles[getTax(stack.val) > 0 ? 'table-tax-d' : 'table-tax']}\n      >\n        {(getTax(stack.val) > 0 ? getTax(stack.val) : 0) + '원'}\n      </td>\n    </tr>\n  );\n}\n\nexport default TableItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}